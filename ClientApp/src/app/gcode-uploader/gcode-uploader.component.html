<div class="gcode-uploader">
  <h2>3D Printer G-code Cost Calculator</h2>
  <div>
    <input type="file" accept=".gcode,.bgcode" (change)="onFileSelected($event)">
    <button (click)="uploadAndParse()" [disabled]="!selectedFile">Upload & Parse</button>
  </div>

  <div *ngIf="parseResult">
    <h3>Parsed G-code Info</h3>
    <ul>
      <li><strong>Slicer:</strong> {{parseResult.slicer}}</li>
      <li><strong>Filament Used (g):</strong> {{parseResult.filamentUsedGrams}}</li>
      <li><strong>Filament Used (mm):</strong> {{parseResult.filamentUsedMm}}</li>
      <li><strong>Estimated Print Time:</strong> {{parseResult.estimatedPrintTime}}</li>
      <li><strong>Layer Count:</strong> {{parseResult.layerCount}}</li>
    </ul>
  </div>

  <div *ngIf="parseResult">
    <h3>Cost Parameters</h3>
    <label>Filament Price ($/kg):
      <input type="number" [(ngModel)]="filamentPrice" min="0" step="0.01">
    </label>
    <label>Electricity Price ($/kWh):
      <input type="number" [(ngModel)]="electricityPrice" min="0" step="0.01">
    </label>
    <label>Printer Power (kW):
      <input type="number" [(ngModel)]="printerPower" min="0" step="0.01">
    </label>
    <button (click)="calculateCost()">Recalculate Cost</button>
  </div>

  <div *ngIf="totalCost !== null">
    <h3>Total Estimated Cost: ${{totalCost | number:'1.2-2'}}</h3>
  </div>

  <div *ngIf="error" class="error">
    {{error}}
  </div>
</div>
